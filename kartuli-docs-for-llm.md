<!-- 
==============================================================================
⚠️  GENERATED DOCUMENTATION FOR LLM CONSUMPTION
==============================================================================

This file is automatically generated and may not be up to date.

For the latest documentation, please refer to the main README.md and 
linked documentation files in the repository.

Generated: 2025-10-11T08:07:38.717Z
Source: README.md
Script: generate-docs-for-llm.ts

==============================================================================
-->

# Kartuli - Georgian language learning platform

A free, offline-first **georgian language learning platform** designed for international residents, newcomers, and travelers in Georgia.

## How to help?

Are you a dev? Check out the [contributing document](CONTRIBUTING.md)

Not a developer? Even better, we need all kinds of help, send us an email to collaborators@kartuli.app

## About the project
- [project overview](./docs/project-overview.md)

<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- INCLUDED: ./docs/project-overview.md -->
<!-- CONTEXT: Nested under "About the project" (H2) -->
<!-- INSTRUCTION: Treat headings in this block as relative to the parent context -->
<!-- ═══════════════════════════════════════════════════════════════ -->

# Project Overview

## Mission
To make Georgian language learning accessible and free for everyone, breaking down language barriers for international residents, newcomers, and travelers in Georgia

## Vision
To become the go-to platform for Georgian language learning, ensuring that language is never a barrier to connecting with Georgian culture and community

## Core principles
- **Free forever**: All learning content remains free forever
- **No barriers**: No need to create an account, No need to have internet, no premium accounts, no paywalls, no content restrictions
- **Cost optimization**: Optimize every infrastructure decision to support the maximum number of students while delaying monetization needs as long as possible
- **Operational monetization only**: Revenue only covers operational costs (servers, databases, authentication, email services), **never for profit**

## Target market
Non-Georgian speakers

## Value proposition
- **Free**, comprehensive Georgian language learning **without any content restrictions or premium barriers**
- Includes **offline support** for learning anywhere, anytime; 
- No need to create an account or install anything to **try the learning experience in just a few clicks**

## Revenue model
- **Purpose**: Only to cover operational costs (servers, databases, authentication, email services), **never profit**
- **Possible sources of income**: Affiliate partnerships with learning resources (books, courses), learning platforms (online classes) or physical language schools
    - **We would monetize only after provider free-tier limits are consistently exceeded**
- **We will never go with**: Premium accounts, ads, paywalls, content restrictions, or marketing-focused monetization

## Competitive advantage
- **Major language learning apps don't support Georgian well**
- Existing Georgian language learning apps are revenue driven, prioritizing profit vs student learning experience (freemium models, subscriptions, ads...)
- Multi-language support for native languages not typically supported
<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- END INCLUDED: ./docs/project-overview.md -->
<!-- ═══════════════════════════════════════════════════════════════ -->


## Roadmap

### Shipped

- ^^

### Currently working on

#### Game prototype

- [game prototype](docs/specs/game-prototype.md)

<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- INCLUDED: docs/specs/game-prototype.md -->
<!-- CONTEXT: Nested under "Game prototype" (H4) -->
<!-- INSTRUCTION: Treat headings in this block as relative to the parent context -->
<!-- ═══════════════════════════════════════════════════════════════ -->

# Game prototype specs (v0)

- Redirect from "/" to "/en/ka/app"

- Semi hardcoded localized content pack for ka-en generated by 50 vocabulary items
- Vocabulary items are stored in a supabase table with this columns:
    - target: item in Georgian script (example: "გამარჯობა")
    - transliteration: item transliteration (example: "gamarjoba")
    - native: item in English (example: "hello")
    - module: text used for grouping items (examples: "101","Class 1", "Class 2")
- LocalizedContentPack fetching on client
    - 1 Ask the database in the game client to get all the items from the table
    - 2 Group them by "module" to create Modules
    - 3 Order the items of each Module by target (less prone to position changes)
    - 4 Split each Module items in chunk of 5 items, create lessons inside the modules with those items
    - 5 Fill the remaining properties of the LocalizedContentPack with random or hardcoded dummy values

- Hub page with list of modules and lessons
    - Clicking a lesson will navigate to the lesson lobby page

- LessonLobby page with flashcards of lesson's items
    - Flashcard contains: target, transliteration, native
    - Button to launch the game, clicking there will navigate to the lesson game page
    
- LessonGame page with rounds
    - Generate 10 rounds with the items of the lesson
        - Generate 1 round for each item on the lesson, then start over and loop until we have 10 rounds
        - Only 1 minigame type, all rounds use the same minigame
    - Minigame format:
        - Question: show target and transliteration
        - Answer: offer 4 answers
            - one answer (right one) is the native property of the item
            - other 3 answers (wrong ones) are the native property of random items from the lesson
    - After each round, show result for the round: win or fail + right answer, and button to continue to next round
    - After all rounds, show summary of rounds: win or fail + right answer for each round, button to go back to hub
<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- END INCLUDED: docs/specs/game-prototype.md -->
<!-- ═══════════════════════════════════════════════════════════════ -->


### Planned (tentative order by priority)

#### Game
- Alphabet semi-hardcoded content and games
- Terms & Privacy info page (minimum version for analytics)
- Analytics and consent banner
- Offline support
- Student Activity
- Grammar semi-hardcoded content and games
- Real content packs
- Landing info page
- Social auth google
- Multilanguage support
- Dictionary
- Favorites
- Profile
- Social auth facebook
- Mascot

#### CMS

#### Newsletter

#### Bot

## Product
- [glossary](./docs/glossary.md)

<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- INCLUDED: ./docs/glossary.md -->
<!-- CONTEXT: Nested under "Product" (H2) -->
<!-- INSTRUCTION: Treat headings in this block as relative to the parent context -->
<!-- ═══════════════════════════════════════════════════════════════ -->

# Glossary

Key terms and concepts used throughout the Kartuli project

Use these terms consistently to ensure clear communication

## Core language terms
- **Native language**: The student's first language or primary language (e.g., English, Ukrainian, Russian, Belarusian, Hindi, Spanish...)
- **Target language**: The language the student is learning (Georgian)
- **Interface language**: The language used for the app's UI, menus, and instructions (matches user's native language)

## User types
- **Students**: Learners who progress through the game client experiences
  - **Anonymous Students**: Learn without creating an account, progress saved only on the device
  - **Registered Students**: Create an account to enable progress synchronization across devices
- **Volunteers**: Contributors who keep the project running and growing
  - **Admins**: Manage overall project operations and governance
  - **Learning Content Managers**: Curate and maintain content packs
  - **Content Reviewers**: Provide feedback on translations and language accuracy
  - **Technicians**: Collaborate on design, development, marketing, and related operations

## Game content terms
- **Alphabet item**: Entry with data and assets to learn an alphabet letter
- **Vocabulary item**: Entry with data and assets to learn a word or phrase
- **Grammar item**: Entry with data and assets to learn a language rule
- **Lesson**: Subset of items of the same type (letters, words or grammar, never mixed) that are used to generate dynamic games
- **Module**: Themed collection of lessons defined within the content pack to structure learning
- **Master content pack**: Canonical dataset for a target language, containing metadata, items, lessons and modules that all native content packs reference
- **Native content pack**: Dataset for a target language, containing translations of the master data for a native language
- **Localized content pack**: Dataset combining all the info from a master content pack and a native data pack,
- **Content pack manifest**: Versioned document describing available master packs and native content packs, used by the client to determine downloads and fallbacks
- **Assets**: Media files (images, audios) shared per target language, referenced by items across the content system
- **Resources**: Links to learning content outside of the kartuli game app: books, wallpapers, posters, schools, forums, courses...

## Game terms
- **Lesson lobby**: Page with flashcards to learn or refresh lesson items; flashcards display mastery and favorite status for each item; games are launched from here
- **Lesson game**: Dynamic game generated for a lesson, uses the lesson items to create minigame rounds; finishing a game will update the student activity registry
- **Minigame**: Round for a game with a question and multiple answer options, can be won if the answer is right or failed if the answer is wrong
- **Student activity**: Record that accumulates wins, fails and a list of last played games per item and per lesson and time spent playing; used for gamification computation, and next lesson recommendation algorithm

## Gamification Terms
- **Progress**: Information computed (not stored) from student activity
- **Mastery threshold**: Number of wins to mark an item as mastered
- **Mastered item**: Binary status indicating whether an item has met the mastery threshold
- **Student level**: Progress tier determined by total mastered items, emphasizing early alphabet completion

## Analytics Terms
- **Analytics**: Optional student behavior tracking for app usage analysis, separate from activity and gamification
- **Analytics consent**: Student permission required before sending any analytics events to external services
- **Event categories**: Grouped analytics events (Acquisition, Activation/Engagement, Retention/Business Metrics)
- **Funnel analysis**: Tracking student progression through key app flows (landing → app → lesson → game)
- **Anonymous analytics**: Device-level tracking without personal data, using client-generated ID only
- **Data export**: Student's right to receive their tracked data in portable format (JSON/CSV)
- **Data deletion**: Student's right to have their tracked data permanently removed from all systems

## Features
- **Offline support**: Ability to learn without internet connection
- **Installation**: Download and persist the learning content (both data and assets) in the device, for offline usage
- **Update**: Update the installed learning content when new content is released
- **Sync**: Synchronization of student progress between devices for registered students
- **Recommendation algorithm**: Suggest next lessons based on student activity, progress, and other possible factors
- **Dictionary**: List all available content and allow to search
- **Favorites**: Save items for quick access and custom lessons
<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- END INCLUDED: ./docs/glossary.md -->
<!-- ═══════════════════════════════════════════════════════════════ -->


## Tech

### Diagrams

Generated with draw.io

### Conventions
- [code-conventions](./docs/code-conventions.md)

<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- INCLUDED: ./docs/code-conventions.md -->
<!-- CONTEXT: Nested under "Conventions" (H3) -->
<!-- INSTRUCTION: Treat headings in this block as relative to the parent context -->
<!-- ═══════════════════════════════════════════════════════════════ -->

# Code conventions

## Commit Convention
Always use conventional commit format for all commits:
- Format: `<type>[optional scope]: <description>`
- Types: feat, fix, docs, style, refactor, perf, test, chore
- Examples: `docs: add project overview`, `feat(auth): add social login`

## Code Style
- Use TypeScript for all new code
- Follow ESLint configuration
- Use Prettier for code formatting
- Write meaningful variable and function names

## Architecture
- Prefer serverless and managed solutions
- Optimize for cost efficiency
- Design for offline-first functionality
- Use PWA best practices

## Testing
- Tests files live next to the file they are testing
- Avoid separate test folder
- Use descriptive test names
- Test both happy path and edge cases
<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- END INCLUDED: ./docs/code-conventions.md -->
<!-- ═══════════════════════════════════════════════════════════════ -->

- [github-workflow](./docs/github-workflow.md)

<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- INCLUDED: ./docs/github-workflow.md -->
<!-- CONTEXT: Nested under "Conventions" (H3) -->
<!-- INSTRUCTION: Treat headings in this block as relative to the parent context -->
<!-- ═══════════════════════════════════════════════════════════════ -->

# GitHub Workflow

This document describes how we use GitHub for collaboration, issue tracking, and automation.

## Issues and Pull Requests

### Creating Issues

All work should start with a GitHub issue. Use our issue template to ensure consistency:

1. Navigate to **Issues** → **New Issue**
2. Select **Feature or Task** template
3. Fill out all required sections:
   - **Type**: Select one (feat, chore, fix, docs, test)
   - **Scope**: Select applicable scope(s) (game-client, backoffice-client, ui, storybook, e2e, global)
   - **Description**: Clearly describe what needs to be done
   - **Acceptance Criteria**: List specific conditions for completion
4. Optionally add:
   - **Size**: Estimate effort (small/medium/large)
   - **Priority**: Set priority level (high/medium/low)
   - **Extra Tags**: Mark as `good first issue` or `help wanted` if appropriate

### Creating Pull Requests

#### From an Issue (Recommended)
The recommended approach is to create a PR directly from an issue:

1. Navigate to the issue
2. Click **"Create a branch"** in the right sidebar (or **"Development"** section)
3. This creates a linked branch and helps GitHub auto-link the PR to the issue

#### Manual PR Creation
If creating a PR manually:

1. Create your feature branch locally
2. Make your changes following our coding standards
3. Push your branch to GitHub
4. Create a pull request using our PR template
5. **Important**: Link to the issue using keywords in the PR description:
   - `Closes #123` - Closes the issue when PR is merged
   - `Fixes #456` - Same as `Closes`
   - `Resolves #789` - Same as `Closes`

#### PR Title Format
PR titles **must** follow our [conventional commit format](./code-conventions.md#commit-convention).

**Quick examples**:
- `feat(game-client): add user authentication system`
- `fix(ui): resolve button alignment on mobile`
- `docs: update contributing guidelines`
- `chore(e2e): upgrade Playwright to v1.40`

### Label Propagation

When you create a PR from an issue or link it properly using keywords (`Closes #123`), our automation will:
- Automatically copy labels from the issue to the PR
- This helps maintain consistent labeling across issues and PRs

## Labels Structure

Our repository uses a structured labeling system defined in `.github/labels.yml`.

### Scope Labels (Blue - `#0075ca`)
Define which part of the monorepo is affected:

- `scope:game-client` - Game client application
- `scope:backoffice-client` - Backoffice client application
- `scope:ui` - UI package
- `scope:storybook` - Storybook tool
- `scope:e2e` - E2E testing
- `scope:global` - Shared packages or general repository tasks

### Type Labels (Green - `#28a745`)
Aligned with conventional commit types:

- `type:feat` - New feature
- `type:chore` - Infrastructure, setup tasks, non-feature work
- `type:fix` - Bug fix
- `type:docs` - Documentation changes
- `type:test` - Testing-related changes

### Priority Labels (Red/Orange/Yellow)
Indicate urgency and importance:

- `priority:high` (Red - `#d73a4a`) - Urgent, blocking issues
- `priority:medium` (Orange - `#ff9800`) - Important, should be addressed soon
- `priority:low` (Yellow - `#ffd700`) - Nice to have, can wait

### Size Labels (Purple - `#9c27b0`)
Estimate the effort required:

- `size:small` - Quick fix, minor change (< 2 hours)
- `size:medium` - Moderate effort (2-8 hours)
- `size:large` - Significant work (> 8 hours)

### Extra Labels
Special purpose labels:

- `good first issue` (Purple - `#7057ff`) - Suitable for newcomers
- `help wanted` (Teal - `#008672`) - Community help is appreciated

### Applying Labels

**On Issues**: Apply labels when creating or updating issues. Required labels are Type and Scope.

**On PRs**: Labels are automatically propagated from linked issues. You can also add labels manually if needed.

## Linking Issues and PRs

### Automatic Linking
GitHub supports several methods to link PRs to issues:

1. **Using the GitHub UI**: Click "Create a branch" or "Development" section on an issue
2. **Using keywords in PR description**: `Closes #123`, `Fixes #456`, `Resolves #789`
3. **Using the PR sidebar**: Select linked issues in the "Development" section

### Closing Issues Automatically
When you use keywords like `Closes #123` in your PR description, GitHub will:
- Link the PR to issue #123
- Automatically close issue #123 when the PR is merged
- Add a reference in the issue timeline

### Multiple Issues
If your PR addresses multiple issues:
```
Closes #123
Closes #456
Fixes #789
```

## GitHub Actions

### Syncing Labels to GitHub

Labels are defined in `.github/labels.yml`. To sync them with GitHub:

1. Navigate to **Actions** tab
2. Select **"Sync Labels"** workflow
3. Click **"Run workflow"** → **"Run workflow"**
4. Wait for completion (usually < 30 seconds)

**When to sync**:
- After adding new labels to `.github/labels.yml`
- After modifying label names, colors, or descriptions
- When setting up a new repository

### Automatic Label Propagation

The **"Propagate Labels from Issue to PR"** workflow runs automatically when:
- A new pull request is created
- The PR description contains issue keywords (`Closes #123`, `Fixes #456`, etc.)

This workflow:
1. Extracts the linked issue number from the PR description
2. Fetches labels from that issue
3. Applies the same labels to the PR

No manual action required - it runs automatically!

## Templates

### Issue Template
Located at `.github/ISSUE_TEMPLATE/feature_or_task.md`

Single comprehensive template for all issues (features, bugs, tasks, documentation).

**Required fields**:
- Type (feat, chore, fix, docs, test)
- Scope (game-client, backoffice-client, ui, storybook, e2e, global)
- Description
- Acceptance Criteria

**Optional fields**:
- Size estimate
- Priority level
- Extra tags (good first issue, help wanted)
- Notes and references

### Pull Request Template
Located at `.github/pull_request_template.md`

Standard template for all pull requests.

**Required sections**:
- Description
- Linked issues (using `Closes #` keywords)
- Type selection
- Scope selection

**Optional sections**:
- Screenshots
- Preview links
- Testing notes

**Important**: PR title must follow conventional commit format.
<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- END INCLUDED: ./docs/github-workflow.md -->
<!-- ═══════════════════════════════════════════════════════════════ -->


### Data model
- [data content model](./docs/data-content-model.md)

<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- INCLUDED: ./docs/data-content-model.md -->
<!-- CONTEXT: Nested under "Data model" (H3) -->
<!-- INSTRUCTION: Treat headings in this block as relative to the parent context -->
<!-- ═══════════════════════════════════════════════════════════════ -->

# Kartuli Data Content Model

## Files and purpose (4 + 1)

- **master-pack-items-ka.vX.json**: full master items (alphabet, vocabulary, grammar).
- **native-pack-items-ka-<locale>.vX.json**: full native items.
- **master-pack-course-ka.vY.json**: master lessons + modules.
- **native-pack-course-ka-<locale>.vY.json**: native lessons + modules.
- **content-manifest.json**: versions + per-type counts

> You may skip persisting source packs and only persist the **localized bundle** to cut cold-start compute. Either way, render from the **localized bundle** in memory.

## Asset paths and derivation (relative-only)

- JSON packs store **relative** `image_paths`, `audio_paths`, `thumbnail_path`.
- Client derives full URLs from fixed bases:
  - Alphabet → `ALPHABET_BASE/images/` and `/audios/`
  - Vocabulary → `VOCAB_BASE/images/` and `/audios/`
  - Grammar → `GRAMMAR_BASE/images/` and `/audios/`
  - Lesson thumbnails → `LESSONS_BASE/images`
  - Module thumbnails → `MODULES_BASE/images`
- Assets are optional to support text-only mode.

## Size expectations

- Source JSON remains tiny (<1 MB total uncompressed at ~2k vocab).
- **Defer audio/images** without blocking core UX.

## Arrays vs maps

- **Source packs (CDN)** use arrays (historical format; stable, small).
- **Localized bundle** uses **maps by `id`** for O(1) lookups and **edge maps** for inverse relations.
- **Optional order arrays** exist only where UI needs a canonical render order.

---

## Future-proof knobs for size optimization

- Key minification for packs (e.g., `content→c`, `image_paths→im`) if you need ~10–30% JSON reduction.

```ts
/**
 * Data Content model for Kartuli
 */

/* ────────────────────────────── Shared ────────────────────────────── */

interface Assets {
  /** Relative file names only; client derives full URLs from fixed base url + type */
  image_paths: string[];
  audio_paths: string[];
}

/* ────────────────────────────── Vocabulary ────────────────────────────── */

interface MasterVocabularyItemContent {
  target: string; // e.g., "გამარჯობა"
  transliteration: string; // e.g., "gamarjoba"
}

interface MasterVocabularyItemExample {
  id: string;
  target: string; // e.g., "გამარჯობა ვიქტორ, როგორ ხარ?"
  transliteration: string; // e.g., "gamarjoba vikt’or, rogor khar?"
}

interface MasterVocabularyItem {
  id: string;
  content: MasterVocabularyItemContent;
  assets: Assets;
  examples: MasterVocabularyItemExample[];
}

interface NativeVocabularyItemContent {
  native: string; // e.g., "hello"
}

interface NativeVocabularyItemExample {
  id: string;
  native: string; // e.g., "hello Viktor, how are you?
}

interface NativeVocabularyItem {
  id: string;
  content: NativeVocabularyItemContent;
  examples: NativeVocabularyItemExample[];
}

interface LocalizedVocabularyItemContent
  extends MasterVocabularyItemContent,
    NativeVocabularyItemContent {}

interface LocalizedVocabularyItemExample
  extends MasterVocabularyItemExample,
    NativeVocabularyItemExample {}

interface LocalizedVocabularyItem {
  id: string;
  content: LocalizedVocabularyItemContent;
  assets: Assets;
  examples: LocalizedVocabularyItemExample[];
}

/* ────────────────────────────── Alphabet ────────────────────────────── */

interface MasterAlphabetItemContent {
  glyph: string; // e.g., "ა"
  name: string; // e.g., "ანი"
  transliteration: string; // e.g., "ani"
}

interface MasterAlphabetItem {
  id: string;
  content: MasterAlphabetItemContent;
  assets: Assets;
}

interface NativeAlphabetItemContent {
  native: string; // e.g., "a"
}

interface NativeAlphabetItem {
  id: string;
  content: NativeAlphabetItemContent;
  pronunciation_hint: string; // e.g., "Like in car, dad, bat, fast"
}

interface LocalizedAlphabetItemContent
  extends MasterAlphabetItemContent,
    NativeAlphabetItemContent {}

interface LocalizedAlphabetItem {
  id: string;
  content: LocalizedAlphabetItemContent;
  assets: Assets;
  pronunciation_hint: string;
}

/* ────────────────────────────── Grammar ────────────────────────────── */

interface MasterGrammarItemContent {
  target: string;
  transliteration: string;
}

interface MasterGrammarItemExample {
  id: string;
  target: string;
  transliteration: string;
}

interface MasterGrammarItem {
  id: string;
  content: MasterGrammarItemContent;
  assets: Assets;
  examples: MasterGrammarItemExample[];
}

interface NativeGrammarItemContent {
  native: string;
}

interface NativeGrammarItemExample {
  id: string;
  native: string;
}

interface NativeGrammarItem {
  id: string;
  content: NativeGrammarItemContent;
  examples: NativeGrammarItemExample[];
}

interface LocalizedGrammarItemContent extends MasterGrammarItemContent, NativeGrammarItemContent {}
interface LocalizedGrammarItemExample extends MasterGrammarItemExample, NativeGrammarItemExample {}

interface LocalizedGrammarItem {
  id: string;
  content: LocalizedGrammarItemContent;
  assets: Assets;
  examples: LocalizedGrammarItemExample[];
}

/* ────────────────────────────── Lessons ────────────────────────────── */

interface MasterLessonContent {
  target: string;
  transliteration: string;
}

interface MasterLesson {
  id: string;
  type: 'alphabet' | 'vocabulary' | 'grammar';
  item_ids: string[];
  content: MasterLessonContent;
  /** Relative file names only; client derives full URLs from fixed base url + type */
  thumbnail_path: string;
}

interface NativeLessonContent {
  native: string;
}

interface NativeLesson {
  id: string;
  content: NativeLessonContent;
}

interface LocalizedLessonContent extends MasterLessonContent, NativeLessonContent {}

interface LocalizedLesson {
  id: string;
  type: 'alphabet' | 'vocabulary' | 'grammar';
  item_ids: string[];
  thumbnail_path: string;
  content: LocalizedLessonContent;
}

/* ────────────────────────────── Modules ────────────────────────────── */

interface MasterModuleContent {
  target: string;
  transliteration: string;
}

interface MasterModule {
  id: string;
  type: 'alphabet' | 'vocabulary' | 'grammar';
  lesson_ids: string[];
  content: MasterModuleContent;
  /** Relative file names only; client derives full URLs from fixed base url + type */
  thumbnail_path: string;
}

interface NativeModuleContent {
  native: string;
}

interface NativeModule {
  id: string;
  content: NativeModuleContent;
}

interface LocalizedModuleContent extends MasterModuleContent, NativeModuleContent {}

interface LocalizedModule {
  id: string;
  type: 'alphabet' | 'vocabulary' | 'grammar';
  lesson_ids: string[];
  thumbnail_path: string;
  content: LocalizedModuleContent;
}

/* ────────────────────────────── Source packs (CDN) ─────────────────── */

interface MasterContentPackItems {
  version: string;
  target_lang: string; // e.g., "ka"
  schema_version: string; // bump on schema changes
  generated_at: string; // ISO8601 UTC
  total_assets_bytes_raw: number; // informational/debug
  alphabet_items: MasterAlphabetItem[];
  vocabulary_items: MasterVocabularyItem[];
  grammar_items: MasterGrammarItem[];
}

interface MasterContentPackCourse {
  version: string;
  target_lang: string;
  schema_version: string;
  generated_at: string;
  total_assets_bytes_raw: number;
  lessons: MasterLesson[];
  modules: MasterModule[];
}

interface NativeContentPackItems {
  version: string;
  target_lang: string; // e.g., "ka"
  native_lang: string; // e.g., "en"
  schema_version: string;
  generated_at: string;
  alphabet_items: NativeAlphabetItem[];
  vocabulary_items: NativeVocabularyItem[];
  grammar_items: NativeGrammarItem[];
}

interface NativeContentPackCourse {
  version: string;
  schema_version: string;
  target_lang: string;
  native_lang: string;
  generated_at: string;
  lessons: NativeLesson[];
  modules: NativeModule[];
}

/* ────────────────────────────── Localized bundle (client-built) ────── */

interface LocalizedContentPackMeta {
  /** Opaque identifier of this localized bundle (hash or UUID). */
  pack_id: string;
  target_lang: string;
  native_lang: string;
  schema_version: string;
  generated_at: string;
  source_versions: {
    master_items: string;
    native_items: string;
    master_course: string;
    native_course: string;
  };
  /** Optional sanity/debug information mirroring manifest counts. */
  stats?: {
    alphabet_items: number;
    vocabulary_items: number;
    grammar_items: number;
    lessons: number;
    modules: number;
    total_assets_bytes_raw?: number;
  };
  /** Optional: include if you want CDN swap without app redeploy. */
  asset_bases?: {
    alphabet: { image_base: string; audio_base: string };
    vocabulary: { image_base: string; audio_base: string };
    grammar: { image_base: string; audio_base: string };
    lesson_thumbs_base: string;
    module_thumbs_base: string;
  };
}

interface LocalizedContentPackData {
  /** O(1) lookups by id. */
  alphabetItemsById: Record<string, LocalizedAlphabetItem>;
  vocabularyItemsById: Record<string, LocalizedVocabularyItem>;
  grammarItemsById: Record<string, LocalizedGrammarItem>;
  lessonsById: Record<string, LocalizedLesson>;
  modulesById: Record<string, LocalizedModule>;
  /** Inverse edges for fast incremental materialization. */
  itemIdToLessonIds: Record<string, string[]>;
  lessonIdToModuleIds: Record<string, string[]>;
  /** Optional canonical render order for listings. */
  lessonOrder?: string[];
  moduleOrder?: string[];
}

interface LocalizedContentPack {
  meta: LocalizedContentPackMeta;
  data: LocalizedContentPackData;
}

/* ────────────────────────────── Manifest ───────────────────────────── */

interface ContentPackManifest {
  version: string; // manifest version
  target_lang: string; // e.g., "ka"
  schema_version: string; // must match packs' schema_version
  generated_at: string; // ISO8601 UTC
  total_assets_bytes_raw: number;

  // Master items pack
  master_content_pack_items_version: string;
  master_content_pack_alphabet_items_count: number;
  master_content_pack_vocabulary_items_count: number;
  master_content_pack_grammar_items_count: number;

  // Master course pack
  master_content_pack_course_version: string;
  master_content_pack_lessons_count: number;
  master_content_pack_modules_count: number;

  // Native packs keyed by learner locale (one-level codes like "en", "es")
  native_content_packs: Record<
    string,
    {
      native_content_pack_items_version: string;
      native_content_pack_alphabet_items_count: number;
      native_content_pack_vocabulary_items_count: number;
      native_content_pack_grammar_items_count: number;

      native_content_pack_course_version: string;
      native_content_pack_lessons_count: number;
      native_content_pack_modules_count: number;
    }
  >;
}
```
<!-- ═══════════════════════════════════════════════════════════════ -->
<!-- END INCLUDED: ./docs/data-content-model.md -->
<!-- ═══════════════════════════════════════════════════════════════ -->


### Stack

Status: 🟢 Active | ⚫ Planned | 🟡 To be discussed

| Technology | Status | Layer | Notes |
| ---------- | ------ | ----- | ----- |
| **git** | 🟢 | Version Control | |
| **pnpm** | ⚫ | Package Manager | Workspace management |
| **turborepo** | ⚫ | Build System | Monorepo management |
| **TypeScript** | ⚫ | Language | |
| **Eslint** | ⚫ | Linting | |
| **Prettier** | ⚫ | Formatting | |
| **Tailwind** | ⚫ | Styling | |
| **React** | ⚫ | UI Library | |
| **react-aria** | ⚫ | UI Components | Accessibility, WCAG compliance |
| **Nextjs** | ⚫ | Framework | App router|
| **Turbopack** | ⚫ | Bundler | Next.js applications |
| **Vite** | ⚫ | Bundler | Storybook, VitePress |
| **rxdb** | ⚫ | Storage (Client) | Sync management |
| **IndexedDB** | ⚫ | Storage (Client) | Offline support|
| **Cache Storage** | ⚫ | Storage (Client) | PWA asset caching |
| **cdn** | ⚫ | Infrastructure | Cloudflare |
| **Postgres** | ⚫ | Database (Server) | Supabase |
| **PWA** | ⚫ | Platform | Installable app |
| **vitest** | ⚫ | Testing | Integration tests, unit tests|
| **playwright** | ⚫ | Testing | e2e tests |
| **Lighthouse CI** | ⚫ | Quality | Performance, accessibility monitoring, runs on GitHub Actions |
| **Fuse.js** | ⚫ | Search | Client-side, offline-first |
| | 🟡 | Internationalization | Options: intlayer, next-intl, i18next |
| **Markdown** | 🟢 | Content | Documentation, info pages (terms, privacy) |
| **Storybook** | ⚫ | Documentation & Development | Component development, documentation |
| **VitePress** | ⚫ | Documentation Site | Project documentation, hosted on GitHub Pages |

### Providers

1 entry per service, even if same provider

Status: 🟢 Active | ⚫ Planned

| Provider | Status | Service | Links | Notes |
| -------- | ------ | ------- | ----- | ----- |
| **GitHub** | 🟢 | Version Control | https://github.com/rocescoca/ | |
| **GitHub** | 🟢 | CI/CD | https://github.com/rocescoca/ | labels sync, labels propagation from Issue to PR |
| **GitHub** | 🟢 | Projects | https://github.com/rocescoca/ | Issue tracking, project boards |
| **GitHub** | ⚫ | Hosting | https://pages.github.com | VitePress documentation site |
| **Qodo** | ⚫ | AI Code Review | https://qodo.ai | GitHub integration |
| **Vercel** | ⚫ | Hosting | https://vercel.com | Next.js optimized |
| **Vercel** | ⚫ | Serverless Functions | https://vercel.com | API endpoints |
| **Supabase** | ⚫ | Database | https://supabase.com | Used for Students Activity, CMS; Frankfurt region (closest to Georgia, good speed for continental Europe) |
| **Supabase** | ⚫ | Authentication | https://supabase.com | Google, Facebook social login |
| **Supabase** | ⚫ | File Storage | https://supabase.com | Assets, content packs |
| **Cloudflare** | ⚫ | CDN | https://cloudflare.com | Serves assets and content packs from Supabase |
| **Cloudflare** | 🟢 | Domain | https://cloudflare.com | |
| **Cloudflare** | ⚫ | Email Services | https://cloudflare.com | Newsletters, transactional emails |
| **PostHog** | ⚫ | Analytics | https://posthog.com | User behavior, consent-based |
| **Sentry** | ⚫ | Error Tracking | https://sentry.io | |
| **New Relic** | ⚫ | Performance Monitoring | https://newrelic.com | |
| **BetterStack** | ⚫ | Uptime Monitoring | https://betterstack.com | Heartbeats, status pages |
| **Chromatic** | ⚫ | Visual Testing | https://chromatic.com | Visual regression, UI review |
| **Tally** | ⚫ | Forms & Surveys | https://tally.so | Anonymous surveys, user feedback |



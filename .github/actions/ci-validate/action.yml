name: CI validate
description: Run typecheck, lint, and test for a target package (run ci-setup first).

inputs:
  target:
    description: Target workspace name (e.g. game-client, web-docs-client).
    required: true

runs:
  using: composite
  steps:
    - name: Run typecheck
      env:
        TARGET: ${{ inputs.target }}
      run: pnpm turbo run typecheck --filter=@kartuli/"$TARGET"
      shell: bash

    - name: Run linting
      env:
        TARGET: ${{ inputs.target }}
      run: pnpm turbo run lint --filter=@kartuli/"$TARGET"
      shell: bash

    - name: Run tests
      env:
        TARGET: ${{ inputs.target }}
      run: pnpm turbo run test --filter=@kartuli/"$TARGET"
      shell: bash
